<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="refresh" content="0; URL=https://tomelliott.co.nz/bus-display" />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Realtime Auckland Transit Network</title>
    <link rel="stylesheet" type="text/css" href="assets/css/app.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
   integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="
   crossorigin=""/>
  </head>
  <body>

    <div class="container-fluid bgblack" id="mainContainer">
        <div class="row">
            <!-- <div class="col-md-8 column"> -->
                <div class="panel-upper">
                    <section id="networkMap">
                        <div id="map"></div>
                    </section>
                </div>
                <div class="panel-lower">
                    <section id="networkRegions">
                    </section>
                </div>
            <!-- </div> -->
            <div class="col-md-4 floating">
                <section id="networkStatus" class="full-height">
                    <div class="panel1">
                        <span class="nwstate">
                            <span id="nwPerc">?</span>%</span>
                        <span class='label'>of buses are on-time</span>
                    </div>

                    <div class="panel2">
                        <table class="table">
                            <tr id="bargraph">
                                <td><div id="earlier"></div></td>
                                <td><div id="early"></div></td>
                                <td><div id="ontime"></div></td>
                                <td><div id="late"></div></td>
                                <td><div id="later"></div></td>
                                <td><div id="quitelate"></div></td>
                                <td><div id="verylate"></div></td>
                                <td><div id="nodata"></div></td>
                            </tr>
                            <tr class="text-center">
                                <td id="deltab0"></td>
                                <td id="deltab1"></td>
                                <td id="deltab2"></td>
                                <td id="deltab3"></td>
                                <td id="deltab4"></td>
                                <td id="deltab5"></td>
                                <td id="deltab6"></td>
                                <td id="deltab7"></td>
                            </tr>
                            <tr>
                                <th>&gt 5m early</th>
                                <th>1&ndash;5m early</th>
                                <th>on time</th>
                                <th>5&ndash;10m late</th>
                                <th>10&ndash;20m late</th>
                                <th>20&ndash;30m late</th>
                                <th>&gt;30m late</th>
                                <th>No Data</th>
                            </tr>
                        </table>
                    </div>

                    <div class="panel4">
                        <!-- <h4>Today's history</h4> -->
                        <p>
                            <span class="early"></span> early
                            <span class="ontime"></span> ontime
                            <span class="late"></span> late
                        </p>
                        <svg id="historytrace"></svg>
                    </div>


                </section>
            </div>
        </div>
    </div>
    <div class="panel3">
        <p>
            <strong>Real-time positions of buses</strong> are obtained through
            Auckland Tranport's public API, which includes
            <strong>arrival/departure delays</strong> at the most recently visited stop.
            Buses between <strong>1 minute early and 5 minutes late</strong> are defined as
            <strong>on time</strong>.
        </p>
        <p>
            The line graph shows how the <strong>percentage of buses
            that are on time, early</strong> (by more than 1 minute), <strong>and late</strong>
            (by more than 5 minutes) has changed today.
        </p>
    </div>



    <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
   integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
   crossorigin=""></script>
    <script src="assets/js/app.min.js"></script>
    <script type="text/javascript">
        /* Load modules for this page */
        var map, data = {"regions": null, "stops": null};
        $("#networkRegions").css('height',
            $($(".region-status")[0]).width());
        networkMap();
        // networkStatus();
        // networkRegions();
    </script>
  </body>
</html>
